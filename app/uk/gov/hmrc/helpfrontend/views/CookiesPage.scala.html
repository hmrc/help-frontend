@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.helpfrontend.config.AppConfig
@import uk.gov.hmrc.helpfrontend.views.html.{CookiesTable, Layout}
@import uk.gov.hmrc.hmrcfrontend.views.html.helpers.HmrcNewTabLinkHelper
@import uk.gov.hmrc.hmrcfrontend.views.viewmodels.newtablinkhelper.NewTabLinkHelper

@this(layout: Layout, newTabLinkHelper: HmrcNewTabLinkHelper, cookiesTable: CookiesTable)

@()(implicit request: Request[_], messages: Messages, appConfig: AppConfig)
@surveyLink = {
  @newTabLinkHelper(NewTabLinkHelper(
    href = Some(messages("help.cookies.how_used.satisfaction_survey.link.url")),
    text = messages("help.cookies.how_used.satisfaction_survey.link.text"))
  )
}
@layout(pageTitle = Some(messages("help.cookies.title"))) {
  <h1 class="govuk-heading-xl" id="cookies-heading">@messages("help.cookies.heading")</h1>
  <p class="govuk-body" id="cookies-info">@messages("help.cookies.info")</p>
  <p class="govuk-body" id="cookies-usages">@messages("help.cookies.usages.list_info")</p>
  <ul class="govuk-list govuk-list--bullet" id="cookies-usages-bullets">
    <li id="cookies-usages-bullets1" >@messages("help.cookies.usages.list_item.1")</li>
    <li id="cookies-usages-bullets2">@messages("help.cookies.usages.list_item.2")</li>
  </ul>
  <div class="govuk-inset-text" id="cookies-inset-text">
    <p class="govuk-body">@messages("help.cookies.notice")</p>
  </div>
  <p class="govuk-body" id="cookies-paragraph-1">@messages("help.cookies.paragraph.1")</p>
  <p class="govuk-body" id="cookies-more-about">
    @messages("help.cookies.paragraph.2")
    @newTabLinkHelper(NewTabLinkHelper(
      href = Some(messages("help.cookies.link.manage_cookies.url")),
      text = messages("help.cookies.link.manage_cookies.text")
    ))@messages("general.fullstop")
  </p>
  <h2 class="govuk-heading-l" id="cookies-are-used">@messages("help.cookies.how_used.heading")</h2>

  <h3 class="govuk-heading-m" id="cookies-website-usage">@messages("help.cookies.how_used.measuring_usage.heading")</h3>
  <p class="govuk-body" id="cookies-analytics-paragraph-1">@messages("help.cookies.how_used.measuring_usage.info")</p>
  <p class="govuk-body" id="cookies-analytics-paragraph-2">@messages("help.cookies.how_used.measuring_usage.list_info")</p>
  <ul class="govuk-list govuk-list--bullet" id="cookies-analytics-bullets">
    <li id="cookies-analytics-bullets1">@messages("help.cookies.how_used.measuring_usage.list_item.1")</li>
    <li id="cookies-analytics-bullets2">@messages("help.cookies.how_used.measuring_usage.list_item.2")</li>
    <li id="cookies-analytics-bullets3">@messages("help.cookies.how_used.measuring_usage.list_item.3")</li>
  </ul>
  <p class="govuk-body" id="cookies-analytics-paragraph-3">@messages("help.cookies.how_used.measuring_usage.paragraph.1")</p>
  <div class="govuk-inset-text" id="cookies-analytics-inset-text">
    <p class="govuk-body">@messages("help.cookies.how_used.measuring_usage.notice")</p>
  </div>
  @cookiesTable(
    id = "cookies-analytics-table",
    section = "measuring_usage",
    cookieIds = Seq("gat", "gds", "ga", "nextpage")
  )
  <p class="govuk-body" id="cookies-analytics-opt-out">
    @messages("help.cookies.how_used.measuring_usage.opt_out.info")
    @newTabLinkHelper(NewTabLinkHelper(
      href = Some(messages("help.cookies.how_used.measuring_usage.opt_out.link.url")),
      text = messages("help.cookies.how_used.measuring_usage.opt_out.link.text")
    ))@messages("general.fullstop")
  </p>

  <h3 class="govuk-heading-m" id="cookies-versions-heading">@messages("help.cookies.how_used.optimizely.heading")</h3>
  <p class="govuk-body" id="cookies-versions-paragraph-1">@messages("help.cookies.how_used.optimizely.info")</p>
  @cookiesTable(
    id = "cookies-versions-table",
    section = "optimizely",
    cookieIds = Seq("optimizelyEndUserId", "optimizelyRedirectData", "optimizelyOptOut")
  )

  <h3 class="govuk-heading-m" id="cookies-consent-heading">@messages("help.cookies.how_used.userconsent.heading")</h3>
  <p class="govuk-body" id="cookies-consent-paragraph-1">@messages("help.cookies.how_used.userconsent.info")</p>
  @cookiesTable(
    id = "cookies-consent-table",
    section = "userconsent",
    cookieIds = Seq("userConsent")
  )

  <h3 class="govuk-heading-m" id="cookies-sessions-heading">@messages("help.cookies.how_used.sessions.heading")</h3>
  <p class="govuk-body" id="cookies-sessions-paragraph">@messages("help.cookies.how_used.sessions.info")</p>
  @cookiesTable(
    id = "cookies-sessions-table",
    section = "sessions",
    cookieIds = Seq("mdtp", "mdtpp", "mdtpdf", "mdtprc", "PLAY_FLASH", "PLAY_LANG", "remme", "mdtpdi")
  )

  <h3 class="govuk-heading-m" id="cookies-introductory-heading">@messages("help.cookies.how_used.intro_message.heading")</h3>
  <p class="govuk-body" id="cookies-introductory-paragraph">@messages("help.cookies.how_used.intro_message.info")</p>
  @cookiesTable(
    id = "cookies-introductory-table",
    section = "intro_message",
    cookieIds = Seq("seen_message")
  )

  <h3 class="govuk-heading-m" id="cookies-user-research-heading">@messages("help.cookies.how_used.user_research_banner.heading")</h3>
  <p class="govuk-body" id="cookies-user-research-paragraph">@messages("help.cookies.how_used.user_research_banner.info")</p>
  @cookiesTable(
    id = "cookies-user-research-table",
    section = "user_research_banner",
    cookieIds = Seq("mdtpurr")
  )

  <h3 class="govuk-heading-m" id="cookies-satisfaction-survey-heading">@messages("help.cookies.how_used.satisfaction_survey.heading")</h3>
  <p class="govuk-body" id="cookies-satisfaction-survey-paragraph">
  @Html(messages("help.cookies.how_used.satisfaction_survey.info", surveyLink))
  </p>
  @cookiesTable(
    id = "cookies-satisfaction-survey-table",
    section = "satisfaction_survey",
    cookieIds = Seq("mbox", "ssoe", "ts", "ep201", "ep202")
  )

  <h3 class="govuk-heading-m" id="cookies-digital-assistant-heading">@messages("help.cookies.how_used.digital_assistant.heading")</h3>
  <p class="govuk-body" id="cookies-digital-assistant-paragraph">@messages("help.cookies.how_used.digital_assistant.info")</p>
  @cookiesTable(
    id = "cookies-digital-assistant-table",
    section = "digital_assistant",
    cookieIds = Seq("inqCA", "inqVital", "tcSrv", "inqSession", "inqState", "JSESSIONID")
  )

  <h3 class="govuk-heading-m" id="cookies-javascript-detection-heading">@messages("help.cookies.how_used.javascript_detection.heading")</h3>
  <p class="govuk-body" id="cookies-javascript-detection-paragraph">@messages("help.cookies.how_used.javascript_detection.info")</p>
  @cookiesTable(
    id = "cookies-javascript-detection-table",
    section = "javascript_detection",
    cookieIds = Seq("js_detection")
  )

  @if(appConfig.showPegaContent) {
    <h3 class="govuk-heading-m" id="cookies-pega-heading">@messages("help.cookies.how_used.pega.heading")</h3>
    <p class="govuk-body" id="cookies-pega-paragraph-1">@messages("help.cookies.how_used.pega.info.1")</p>
    <ul class="govuk-list govuk-list--bullet" id="cookies-pega-bullet">
      <li>@messages("help.cookies.how_used.pega.bullet.1")</li>
      <li>@messages("help.cookies.how_used.pega.bullet.2")</li>
    </ul>
    <p class="govuk-body" id="cookies-pega-paragraph-2">@messages("help.cookies.how_used.pega.info.2")</p>
    <p class="govuk-body" id="cookies-pega-more-info">
      @newTabLinkHelper(NewTabLinkHelper(
        href = Some(messages("help.cookies.how_used.pega.link.url")),
        text = messages("help.cookies.how_used.pega.link.text")
      ))@messages("general.fullstop")
    </p>
  }

  <h3 class="govuk-heading-m" id="cookies-tracking-consent-settings-heading">@messages("help.cookies.settings.heading")</h3>
  <p class="govuk-body" id="cookies-tracking-consent-settings-paragraph">
    @messages("help.cookies.settings.info")
    @newTabLinkHelper(NewTabLinkHelper(
      href = Some(messages("help.cookies.settings.tracking_consent.url")),
      text = messages("help.cookies.settings.tracking_consent.text")
    ))@messages("general.fullstop")
  </p>
}
